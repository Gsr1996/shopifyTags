<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>3D Paddle Customizer</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root {
      --accent: #111;
      --bg-panel: rgba(255, 255, 255, 0.7);
      --radius: 14px;
    }

    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto;
      background: linear-gradient(145deg, #f4f4f4, #e6e9ef);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
      gap: 24px;
      min-height: 100vh;
    }
    .container {
    display: flex;
}

    #ui {
     width: 20rem;
    padding: 24px;
    backdrop-filter: blur(14px);
    background: var(--bg-panel);
    border: 1px solid rgba(0, 0, 0, 0.08);
    box-shadow: 0 4px 18px rgba(0, 0, 0, 0.08);
    border-radius: var(--radius);
    }

    #previewWrap {
          width: 60rem;
    height: 47rem;
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    background: #f3f3f3;
    display: flex;
    align-items: center;
    justify-content: center;
    }

    canvas {
      width: 100%;
      height: 100%;
      display: block;
      border-radius: var(--radius);
    }

    h2 {
      font-weight: 600;
      margin-bottom: 18px;
      font-size: 20px;
    }

    h3 {
      margin: 10px 0 4px;
      font-size: 14px;
      font-weight: 500;
    }

    .swatches {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin: 8px 0 14px;
    }

    .color-swatch {
      width: 36px;
      height: 36px;
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.25s ease;
      box-shadow: inset 0 0 0 2px rgba(0,0,0,0.08), 0 2px 6px rgba(0,0,0,0.05);
    }

    .color-swatch:hover {
      transform: scale(1.1);
    }

    .color-swatch.active {
      outline: 3px solid var(--accent);
      outline-offset: 2px;
      transform: scale(1.12);
    }

    input[type="range"] {
      width: 100%;
      margin: 4px 0 12px;
    }

    select, input[type="file"] {
      width: 100%;
      padding: 8px;
      border-radius: var(--radius);
      border: 1px solid rgba(0,0,0,0.15);
      background: rgba(255,255,255,0.6);
      margin-bottom: 10px;
    }

    button {
      margin-top: 10px;
      padding: 12px 16px;
      border-radius: var(--radius);
      border: none;
      background: var(--accent);
      color: white;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 4px 14px rgba(0,0,0,0.15);
      transition: all 0.3s ease;
      width: 100%;
    }

    button:hover {
      background: #000;
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.2);
    }

    small {
      display: block;
      color: #555;
      margin-top: 10px;
      font-size: 12px;
      text-align: center;
    }
  </style>

  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "OrbitControls": "https://unpkg.com/three@0.160.0/examples/jsm/controls/OrbitControls.js"
    }
  }
  </script>
</head>

<body>
  <div style="text-align:center; margin-bottom:20px;">
    <h1>3D Pickleball Paddle Customizer</h1>
    <p>Customize your paddle colors and logo in real-time!</p>
    </div>
  <div class="container">
  <div id="ui">
    <h2>Pickleball Paddle Customizer üèì</h2>

    <h3>Paddle Face Color</h3>
    <div id="paddleColors" class="swatches">
      <div class="color-swatch active" data-color="#bcbcbc" style="background:#bcbcbc"></div>
      <div class="color-swatch" data-color="#2b7a78" style="background:#2b7a78"></div>
      <div class="color-swatch" data-color="#4a4a8a" style="background:#4a4a8a"></div>
      <div class="color-swatch" data-color="#8b2f34" style="background:#8b2f34"></div>
      <div class="color-swatch" data-color="#c76b49" style="background:#c76b49"></div>
    </div>

    <h3>Grip Color</h3>
    <div id="gripColors" class="swatches">
      <div class="color-swatch active" data-color="#c83b2b" style="background:#c83b2b"></div>
      <div class="color-swatch" data-color="#222" style="background:#222"></div>
      <div class="color-swatch" data-color="#0a6" style="background:#0a6"></div>
      <div class="color-swatch" data-color="#b04a4a" style="background:#b04a4a"></div>
    </div>

    <h3>Rim Color</h3>
    <div id="rimColors" class="swatches">
      <div class="color-swatch active" data-color="#222" style="background:#222"></div>
      <div class="color-swatch" data-color="#666" style="background:#666"></div>
      <div class="color-swatch" data-color="#999" style="background:#999"></div>
      <div class="color-swatch" data-color="#b04a4a" style="background:#b04a4a"></div>
      <div class="color-swatch" data-color="#0a6" style="background:#0a6"></div>
    </div>

    <label for="logoUpload">Upload Logo (PNG)</label>
    <input id="logoUpload" type="file" accept="image/*">

    <h3>Logo Controls</h3>
    <label>X Position</label>
    <input type="range" id="logoX" min="-0.5" max="0.5" step="0.01" value="0">
    <label>Y Position</label>
    <input type="range" id="logoY" min="-0.5" max="0.5" step="0.01" value="0">
    <label>Size</label>
    <input type="range" id="logoScale" min="0.1" max="1" step="0.01" value="0.6">

    <label for="paddleType">Paddle Type</label>
    <select id="paddleType">
      <option>GIO Air</option>
      <option>PowerPlay</option>
      <option>Standard</option>
    </select>

    <button id="addToCartBtn">Add to Cart</button>
    <small>Preview will be attached as image data.</small>
  </div>
  <div id="previewWrap">
    <canvas id="paddlePreview"></canvas>
  </div>
</div>

  

<script type="module">
import * as THREE from 'three';
import { OrbitControls } from 'OrbitControls';

// ---------- Setup ----------
const canvas = document.getElementById('paddlePreview');
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xf3f4f6);

const camera = new THREE.PerspectiveCamera(45, 600/500, 0.05, 100);
camera.position.set(0, 1.05, 2.8);

const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
renderer.setPixelRatio(window.devicePixelRatio);
renderer.setSize(600, 500);
renderer.outputEncoding = THREE.sRGBEncoding;

// ---------- Controls ----------
const controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.08;
controls.enableZoom = false;

// ---------- Lighting ----------
scene.add(new THREE.HemisphereLight(0xffffff, 0x999999, 1.05));
const dir = new THREE.DirectionalLight(0xffffff, 1.0);
dir.position.set(3, 4.5, 3);
scene.add(dir);

// ---------- Paddle Geometry ----------
function paddleOutline(w, h, neckW, neckH, cornerR, shoulderDepth) {
  const s = new THREE.Shape();
  const hw = w / 2, hh = h / 2, nw = neckW / 2, ny = -hh + neckH;
  s.moveTo(-hw + cornerR, hh);
  s.quadraticCurveTo(-hw, hh, -hw, hh - cornerR);
  s.lineTo(-hw, ny + shoulderDepth);
  s.bezierCurveTo(-hw * 0.98, ny + shoulderDepth * 0.6, -hw * 0.45, ny + shoulderDepth * 0.15, -nw, ny);
  s.lineTo(nw, ny);
  s.bezierCurveTo(hw * 0.45, ny + shoulderDepth * 0.15, hw * 0.98, ny + shoulderDepth * 0.6, hw, ny + shoulderDepth);
  s.lineTo(hw, hh - cornerR);
  s.quadraticCurveTo(hw, hh, hw - cornerR, hh);
  s.lineTo(-hw + cornerR, hh);
  s.closePath();
  return s;
}

const SCALE = 0.5;
const W = 1.56 * SCALE, H = 2.96 * SCALE, D = 0.02 * SCALE, neckW = 0.2 * SCALE, neckH = 0.44 * SCALE, cornerR = 0.455 * SCALE, shoulderDepth = 0.9 * SCALE;

const rimShape = paddleOutline(W, H, neckW, neckH, cornerR, shoulderDepth);
const rimGeo = new THREE.ExtrudeGeometry(rimShape, { depth: D + 0.04, bevelEnabled: true, bevelThickness: 0.0015, bevelSize: 0.0015, bevelSegments: 9 });
rimGeo.center();
const rimMat = new THREE.MeshStandardMaterial({ color: 0x222, roughness: 0.45, metalness: 0.2 });
const rim = new THREE.Mesh(rimGeo, rimMat);
scene.add(rim);

const faceShape = paddleOutline(W - 0.08, H - 0.08, neckW - 0.08, neckH, cornerR - 0.05, shoulderDepth - 0.05);
const faceGeo = new THREE.ShapeGeometry(faceShape);
faceGeo.center();
const faceMat = new THREE.MeshPhysicalMaterial({ color: 0xbcbcbc, roughness: 0.3, metalness: 0.15, clearcoat: 0.9, clearcoatRoughness: 0.05, reflectivity: 0.8 });
const frontFace = new THREE.Mesh(faceGeo, faceMat);
frontFace.position.z = 0.045;
const backFace = new THREE.Mesh(faceGeo, faceMat.clone());
backFace.position.z = -0.045;
backFace.rotation.y = Math.PI;
scene.add(frontFace, backFace);
const faces = [frontFace, backFace];

// ---------- Handle ----------
const neckGeo = new THREE.CylinderGeometry(0.12, 0.13, 0.1, 36);
const neckMat = new THREE.MeshStandardMaterial({ color: 0x222 });
const neck = new THREE.Mesh(neckGeo, neckMat);
const neckPosY = -H / 2 + 0.16;
neck.position.y = neckPosY;
scene.add(neck);

const handleGeo = new THREE.CylinderGeometry(0.115, 0.115, 0.5, 48);
const handleMat = new THREE.MeshStandardMaterial({ color: 0xc83b2b });
const handle = new THREE.Mesh(handleGeo, handleMat);
handle.position.y = neckPosY - 0.3;
scene.add(handle);

// ---------- Logo ----------
let logoFront = null, logoBack = null;
const loader = new THREE.TextureLoader();
function addLogo(tex) {
  removeLogos();
  const geo = new THREE.PlaneGeometry(W * 0.6, H * 0.25);
  const mat = new THREE.MeshBasicMaterial({ map: tex, transparent: true });
  logoFront = new THREE.Mesh(geo, mat);
  logoBack = new THREE.Mesh(geo, mat.clone());
  logoBack.rotation.y = Math.PI;
  logoFront.position.z = 0.05;
  logoBack.position.z = -0.05;
  updateLogoPosition();
  scene.add(logoFront, logoBack);
}
function removeLogos() {
  if (logoFront) scene.remove(logoFront);
  if (logoBack) scene.remove(logoBack);
  logoFront = logoBack = null;
}
function updateLogoPosition() {
  if (!logoFront) return;
  const x = parseFloat(document.getElementById('logoX').value);
  const y = parseFloat(document.getElementById('logoY').value);
  const scale = parseFloat(document.getElementById('logoScale').value);
  logoFront.position.x = x; logoFront.position.y = y; logoFront.scale.set(scale, scale, 1);
  logoBack.position.x = x; logoBack.position.y = y; logoBack.scale.set(scale, scale, 1);
}
['logoX','logoY','logoScale'].forEach(id => document.getElementById(id).addEventListener('input', updateLogoPosition));

document.getElementById('logoUpload').addEventListener('change', e => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    const tex = loader.load(reader.result);
    tex.encoding = THREE.sRGBEncoding;
    addLogo(tex);
  };
  reader.readAsDataURL(file);
});

// ---------- Color Pickers ----------
function setupColorPicker(selector, callback) {
  document.querySelectorAll(selector).forEach(s => {
    s.addEventListener('click', () => {
      s.parentNode.querySelectorAll('.color-swatch').forEach(el => el.classList.remove('active'));
      s.classList.add('active');
      callback(s.dataset.color);
    });
  });
}
setupColorPicker('#paddleColors .color-swatch', c => faces.forEach(f => f.material.color.set(c)));
setupColorPicker('#gripColors .color-swatch', c => handleMat.color.set(c));
setupColorPicker('#rimColors .color-swatch', c => rimMat.color.set(c));

// ---------- Animate ----------
function animate() {
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
}
animate();
</script>

</body>
</html>
